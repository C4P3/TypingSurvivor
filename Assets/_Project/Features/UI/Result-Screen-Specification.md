**実装に関する注記:** この画面のアーキテクチャはリファクタリングされました。ビジュアルと機能の仕様は同じですが、実装は結果ごとに個別のViewスクリプトを使用する形ではなくなりました。代わりに、統合されたコントローラー（`SinglePlayerResultView`, `MultiplayerResultView`）と、データ駆動の`AnimationSequencer`コンポーネントを使用します。各結果のレイアウトは、4つの異なるPrefabで管理されます。

---

# **リザルト画面 最終仕様書**

> **注:** このドキュメントは、リザルト画面を構成するUI要素の構造と、それらが表示されるアニメーションシーケンスの概要を定義します。具体的なアニメーションのタイミングや順序は、各Prefabにアタッチされた`AnimationSequencer`コンポーネントで設定されます。

## 1. 基本アーキテクチャ

「Prefab差し替え方式」と「データ駆動アニメーション」を組み合わせた方式を採用します。

1.  司令塔となる`ResultScreen.cs`が、ゲーム結果に応じて4つのPrefab（通常/新記録、フリー/ランク）のいずれかを生成します。
2.  各Prefabには、`SinglePlayerResultView`または`MultiplayerResultView`スクリプトがアタッチされており、UIへのデータ設定を担当します。
3.  各Prefabには`AnimationSequencer`コンポーネントもアタッチされており、アニメーションの順序・タイミングはInspector上で定義されます。これにより、コードを変更することなく演出を調整可能です。

---

## 2. シングルプレイ (自己ベスト更新時)

- **使用Prefab**: `SP_NewRecord_Result.prefab` (名称は例)

### 表示要素
- 結果バナー: 「New Record!」
- 主要結果: 今回のタイム、自己ベストタイム
- 詳細情報: ランク情報、統計(WPM/Blocks/Miss)
- アクションボタン: 「もう一度」「メインメニューへ」

### アニメーションシーケンス
アニメーションの具体的な順序や時間は、Prefabの`AnimationSequencer`で定義されます。基本的な流れは以下の通りです。

1.  **結果バナー表示**: 「New Record!」パネルが表示され、一定時間後に非表示になります。
2.  **主要結果表示**: タイムなどの情報パネルが表示されます。
3.  **詳細情報表示**: ランクや統計などのパネルが追加で表示されます。
4.  **アクションボタン表示**: 最後に操作ボタンが表示されます。

---

## 3. シングルプレイ (通常時)

- **使用Prefab**: `SP_Normal_Result.prefab` (名称は例)

### 表示要素
- 主要結果: 今回のタイム、自己ベストタイム
- 詳細情報: ランク情報、統計(WPM/Blocks/Miss)
- アクションボタン: 「もう一度」「メインメニューへ」

### アニメーションシーケンス
`AnimationSequencer`で定義されます。自己ベスト更新時と異なり、「結果バナー表示」のステップは含まれません。

---

## 4. ランクマッチ

- **使用Prefab**: `MP_Ranked_Result.prefab` (名称は例)

### 表示要素
- 結果バナー: 「YOU WIN」 / 「GAME OVER」
- プレイヤーカード (x2): プレイヤー名、**レート変動**、統計(WPM/Blocks/Miss)
- アクションボタン: 「もう一度」「メインメニューへ」

### アニメーションシーケンス
`AnimationSequencer`で定義されます。基本的な流れは以下の通りです。

1.  **結果バナー表示**: 「YOU WIN」等のパネルが表示され、一定時間後に非表示になります。
2.  **プレイヤーカード表示**: 左右に各プレイヤーの情報カード（レート変動含む）が表示されます。
3.  **アクションボタン表示**: 最後に操作ボタンが表示されます。

---

## 5. フリーマッチ

- **使用Prefab**: `MP_Free_Result.prefab` (名称は例)

### 表示要素
- 結果バナー: 「YOU WIN」 / 「GAME OVER」
- プレイヤーカード (x2): プレイヤー名、統計(WPM/Blocks/Miss)
- アクションボタン: 「もう一度」「メインメニューへ」

### アニメーションシーケンス
`AnimationSequencer`で定義されます。ランクマッチとほぼ同じ流れですが、表示されるプレイヤーカードにレート変動の項目は含まれません。
